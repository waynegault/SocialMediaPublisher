# =============================================================================
# Social Media Publisher - Environment Configuration
# =============================================================================

# --- API KEYS ---

# Get this from Google AI Studio
#GEMINI_API_KEY

# Optional: Use Hugging Face for image generation (text-to-image)
# Either variable name works:
# HUGGINGFACE_API_TOKEN=hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# HUGGINGFACE_API_KEY=hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Model to use (defaults to SDXL base if omitted)
# HF_TTI_MODEL=stabilityai/stable-diffusion-xl-base-1.0
# Prefer HF when token present
# HF_PREFER_IF_CONFIGURED=True

# --- IMAGE STYLE ---
# Customize the visual style for generated images
# IMAGE_STYLE="photorealistic, 1960s Kodachrome film aesthetic, slightly desaturated warm tones, vintage cinema color grading, soft golden hour lighting, subtle film grain, rich shadows, muted pastel highlights. Content should reflect cutting edge hi-technology."

# Aspect ratio for generated images (options: 1:1, 16:9, 9:16, 4:3, 3:4)
IMAGE_ASPECT_RATIO=16:9

# LinkedIn Credentials (developer.linkedin.com)
#LINKEDIN_AUTHOR_URN=urn:li:person:xxxxxxxxxx
#LINKEDIN_ORGANIZATION_URN=urn:li:organization:123456789
#LINKEDIN_ACCESS_TOKEN=AQV...
#LINKEDIN_REFRESH_TOKEN=AQV...
#LINKEDIN_CLIENT_ID=your_client_id
#LINKEDIN_CLIENT_ID_SECRET=WPL_AP1.xxx.xxx
#LINKEDIN_REDIRECT_URI=https://www.linkedin.com/developers/tools/oauth/redirect

# Author name for first-person story writing (used in summaries)
# This should be your display name as it appears on LinkedIn
LINKEDIN_AUTHOR_NAME=Your Name Here

# --- LOCAL LLM (LM Studio) ---
# Set to True to prefer local LLM via LM Studio instead of Gemini
PREFER_LOCAL_LLM=False

# --- SEARCH SETTINGS ---

SEARCH_PROMPT="breakthroughs in renewable energy storage"
SEARCH_LOOKBACK_DAYS=7

# If TRUE, uses the timestamp of the last successful run instead of lookback days
USE_LAST_CHECKED_DATE=True

# Optional: customize the full search instruction sent to the LLM.
# Placeholders available:
#  {criteria}       -> will be replaced with SEARCH_PROMPT
#  {since_date}     -> YYYY-MM-DD start date for news filtering
#  {summary_words}  -> desired summary word count
# Example (uncomment to use):
# SEARCH_PROMPT_TEMPLATE="""
# You are an expert tech news curator.
# Find impactful stories about: "{criteria}"
# Only include items after {since_date}.
# For each story return strict JSON with title, sources, summary ({summary_words} words), quality_score.
# Only include high-quality, well-sourced stories (score >= 6).
# """

# How often to run search cycles (in hours)
SEARCH_CYCLE_HOURS=24

# Maximum number of stories to request per search
MAX_STORIES_PER_SEARCH=5

# -----------------------------------------------------------------------------
# CONTENT SETTINGS
# -----------------------------------------------------------------------------

# Target word count for story summaries
SUMMARY_WORD_COUNT=250

# Minimum quality score (1-10) for a story to be considered for publication
MIN_QUALITY_SCORE=7

# -----------------------------------------------------------------------------
# DEDUPLICATION SETTINGS
# -----------------------------------------------------------------------------

# Jaccard similarity threshold for semantic deduplication (0.0 to 1.0)
# Higher values = stricter matching (fewer duplicates detected)
# Lower values = looser matching (more duplicates detected)
DEDUP_SIMILARITY_THRESHOLD=0.6

# -----------------------------------------------------------------------------
# URL VALIDATION SETTINGS
# -----------------------------------------------------------------------------

# Enable URL validation before saving stories
# When True, performs HEAD requests to verify URLs are accessible
VALIDATE_SOURCE_URLS=False

# -----------------------------------------------------------------------------
# API RETRY SETTINGS
# -----------------------------------------------------------------------------

# Number of retry attempts for transient API failures
API_RETRY_COUNT=3

# Base delay in seconds between retries (doubles each attempt)
API_RETRY_DELAY=1.0

# Default timeout for cloud API calls (seconds)
API_TIMEOUT_DEFAULT=30

# Timeout for local LLM calls (seconds) - local LLMs often need longer
LLM_LOCAL_TIMEOUT=120

# Max results to fetch from DuckDuckGo search
DUCKDUCKGO_MAX_RESULTS=10

# Max output tokens for LLM responses
LLM_MAX_OUTPUT_TOKENS=8192

# -----------------------------------------------------------------------------
# PUBLICATION SETTINGS
# -----------------------------------------------------------------------------

# Maximum number of stories to publish per cycle
STORIES_PER_CYCLE=3

# The total window to spread the stories over (in hours)
PUBLISH_WINDOW_HOURS=24

# Allow posting time to vary by +/- this many minutes (jitter)
JITTER_MINUTES=30

# Publishing hours window (0-23)
# Stories will only be scheduled between these hours
PUBLISH_START_HOUR=8
PUBLISH_END_HOUR=20

# How often to check for due publications (in seconds)
PUBLISHER_CHECK_INTERVAL_SECONDS=60

# Include job opportunity postscript in LinkedIn posts
# Set to False to disable the "open to opportunities" messages
INCLUDE_OPPORTUNITY_MESSAGE=True

# -----------------------------------------------------------------------------
# CLEANUP SETTINGS
# -----------------------------------------------------------------------------

# Delete unused stories after this many days
EXCLUSION_PERIOD_DAYS=30

# -----------------------------------------------------------------------------
# SIGNATURE BLOCK
# -----------------------------------------------------------------------------

# Text to append to every post (hashtags, attribution, etc.)
SIGNATURE_BLOCK="\n\n#AI #MachineLearning #TechNews #Innovation"

# -----------------------------------------------------------------------------
# STORAGE SETTINGS
# -----------------------------------------------------------------------------

# Database file name
DB_NAME=content_engine.db

# Directory for generated images
IMAGE_DIR=generated_images

# =============================================================================
# PROMPT TEMPLATES (View full prompts with menu option 4: "View All Prompts")
# =============================================================================
# All prompts are configurable via environment variables.
# Use multi-line strings by enclosing in quotes (escape inner quotes with \").
# Use menu option 4 to see current prompt values in full.

# -----------------------------------------------------------------------------
# SEARCH INSTRUCTION PROMPT
# -----------------------------------------------------------------------------
# The system prompt sent to the LLM when searching for stories.
# Placeholders: {max_stories}, {search_prompt}, {since_date}, {summary_words}
#
# SEARCH_INSTRUCTION_PROMPT="You are a news curator. Find {max_stories} recent news stories matching: \"{search_prompt}\"
#
# REQUIREMENTS:
# - Stories must be from after {since_date}
# - Each story needs:
#   * title: A clear, engaging headline
#   * sources: Array of REAL source URLs from your search results
#   * summary: {summary_words} words max
#   * category: One of: Technology, Business, Science, AI, Other
#   * quality_score: 1-10 rating
#   * quality_justification: Brief explanation of the score
#
# CRITICAL: Only include URLs you found in your search results. Do NOT invent or guess URLs.
# If you cannot find a real URL for a story, omit that story entirely.
#
# RESPOND WITH ONLY THIS JSON FORMAT:
# {{
#   \"stories\": [
#     {{
#       \"title\": \"Story Title\",
#       \"sources\": [\"https://real-url-from-search.com/article\"],
#       \"summary\": \"Brief summary here.\",
#       \"category\": \"Technology\",
#       \"quality_score\": 8,
#       \"quality_justification\": \"Highly relevant topic, reputable source, timely\"
#     }}
#   ]
# }}
#
# IMPORTANT: Return complete, valid JSON. Keep summaries concise. Use ONLY real URLs."

# -----------------------------------------------------------------------------
# IMAGE REFINEMENT PROMPT
# -----------------------------------------------------------------------------
# Prompt sent to LLM to create image generation prompts from story content.
# Placeholders: {story_title}, {story_summary}, {image_style}
#
# IMAGE_REFINEMENT_PROMPT="You are creating an image for a professional chemical engineering trade publication (like Chemical Engineering Magazine or AIChE publications).
#
# STORY CONTEXT:
# Story Title: {story_title}
# Summary: {story_summary}
#
# YOUR TASK: Create an image prompt for a REALISTIC, PROFESSIONAL photograph that would appear in an engineering trade journal.
#
# CRITICAL REQUIREMENTS - THE IMAGE MUST BE:
# 1. PHOTOREALISTIC - like a real photograph, NOT artistic, NOT fantasy, NOT stylized
# 2. PROFESSIONAL - suitable for a serious engineering publication
# 3. TECHNICALLY ACCURATE - showing real equipment, processes, or concepts correctly
# 4. CREDIBLE - something a chemical engineer would recognize as realistic
#
# SUBJECT SELECTION (choose the most appropriate):
# - Industrial equipment: reactors, distillation columns, heat exchangers, piping systems, control rooms
# - Laboratory settings: analytical instruments, lab glassware, researchers in lab coats
# - Manufacturing facilities: chemical plants, refineries, pharmaceutical production
# - Process technology: flow diagrams visualized as real equipment, process units
# - Materials and products: chemicals, polymers, catalysts, finished products
# - Data/monitoring: control panels, SCADA screens, process monitoring (if story is about digitalization)
#
# WHAT TO AVOID:
# - Fantasy or sci-fi elements
# - Artistic interpretations or abstract concepts
# - Glowing/magical effects
# - Futuristic imaginary technology
# - Cartoonish or illustrated styles
# - Anything that would look silly to a practicing engineer
#
# STYLE REQUIREMENTS:
# {image_style}
#
# PHOTOGRAPHY SPECS:
# - Professional industrial photography style
# - Clean, well-lit scenes (industrial facility lighting or natural daylight)
# - Sharp focus, high resolution
# - Neutral, realistic colors
# - Documentary/journalistic aesthetic
#
# OUTPUT: Write ONLY the image prompt. No explanations. Maximum 100 words.
# Format: \"[Specific industrial subject], [realistic setting], professional industrial photograph, photorealistic, sharp focus, natural lighting\""

# -----------------------------------------------------------------------------
# IMAGE FALLBACK PROMPT
# -----------------------------------------------------------------------------
# Simple fallback prompt used when LLM refinement fails.
# Placeholders: {story_title}
#
# IMAGE_FALLBACK_PROMPT="Professional industrial photograph for chemical engineering publication: {story_title}. Industrial facility or laboratory setting, photorealistic, documentary style, natural lighting, sharp focus, neutral colors, suitable for engineering trade journal"

# -----------------------------------------------------------------------------
# VERIFICATION PROMPT
# -----------------------------------------------------------------------------
# Prompt used to verify story content before publication.
# Placeholders: {search_prompt}, {story_title}, {story_summary}, {story_sources}
#
# VERIFICATION_PROMPT="You are a strict editorial standards board for a professional social media publication.
#
# ORIGINAL SELECTION CRITERIA:
# \"{search_prompt}\"
#
# STORY TO EVALUATE:
# Title: {story_title}
# Summary: {story_summary}
# Sources: {story_sources}
#
# EVALUATION CRITERIA:
# 1. RELEVANCE: Does this story genuinely match the original selection criteria?
# 2. PROFESSIONALISM: Is the content written in a professional, objective tone?
# 3. DECENCY: Is the content appropriate for all professional audiences?
# 4. ACCURACY: Does the summary appear factual and well-sourced?
# 5. QUALITY: Is this content worth sharing on a professional social media account?
#
# If an image is provided, also evaluate:
# 6. IMAGE APPROPRIATENESS: Is the image professional and suitable for the story?
# 7. IMAGE RELEVANCE: Does the image relate to the story topic?
#
# IMPORTANT IMAGE NOTES:
# - All images are AI-generated, so \"AI generated\" watermarks/tags are ACCEPTABLE and should NOT cause rejection
# - Focus on whether the image content is professional and relevant to the story
#
# DECISION RULES:
# - APPROVE only if ALL criteria are satisfactorily met
# - REJECT if ANY criteria is not met
# - When in doubt, REJECT
#
# Respond with ONLY one of these exact words:
# APPROVED
# or
# REJECTED
#
# Then on a new line, provide a brief (one sentence) reason."